<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>지원금/약정 계산기</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
      background: #fafafb;
      color: #333;
    }
    table {
      width: 100%;
      border-spacing: 0;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px #eee;
    }
    th, td {
      text-align: left;
      padding: 12px 8px;
      font-size: 15px;
    }
    th { background: #f1f3f6; font-weight: bold; }
    tr { border-bottom: 1px solid #eee; }
    input[type='number'] {
      width: 98%;
      padding: 8px;
      font-size: 16px;
      border: 1px solid #ddd;
      border-radius: 8px;
    }
    input[type='number']:disabled { background: #eceff1; }
    .result { margin-top: 18px; padding: 12px; background: #f4f6fa; border-radius: 8px; font-size: 16px; }
    @media (max-width: 600px) {
      th, td { padding: 8px 4px; }
      .result { font-size: 15px; }
    }
  </style>
</head>
<body>
  <form id="calcForm" autocomplete="off">
    <table>
      <tr>
        <th>항목</th>
        <th>공통지원금A</th>
        <th>선택약정A</th>
        <th>공통지원금B</th>
        <th>선택약정B</th>
      </tr>
      <tr>
        <td>기기값</td>
        <td><input type="number" id="deviceA" min="0" /></td>
        <td><input type="number" id="deviceA_s" min="0" disabled /></td>
        <td><input type="number" id="deviceB" min="0" /></td>
        <td><input type="number" id="deviceB_s" min="0" disabled /></td>
      </tr>
      <tr>
        <td>공통지원금</td>
        <td><input type="number" id="supportA" min="0" /></td>
        <td><input type="number" id="supportA_s" min="0" disabled /></td>
        <td><input type="number" id="supportB" min="0" /></td>
        <td><input type="number" id="supportB_s" min="0" disabled /></td>
      </tr>
      <tr>
        <td>추가지원금</td>
        <td><input type="number" id="extraA" min="0" value="0" /></td>
        <td><input type="number" id="extraA_s" min="0" value="0" disabled /></td>
        <td><input type="number" id="extraB" min="0" value="0" /></td>
        <td><input type="number" id="extraB_s" min="0" value="0" disabled /></td>
      </tr>
      <tr>
        <td>의무요금제(월)</td>
        <td><input type="number" id="reqplanA" min="0" /></td>
        <td><input type="number" id="reqplanA_s" min="0" disabled /></td>
        <td><input type="number" id="reqplanB" min="0" /></td>
        <td><input type="number" id="reqplanB_s" min="0" disabled /></td>
      </tr>
      <tr>
        <td>요금제 유지기간(개월)</td>
        <td><input type="number" id="kept_monthsA" min="0" max="24" /></td>
        <td><input type="number" id="kept_monthsA_s" min="0" max="24"/></td>
        <td><input type="number" id="kept_monthsB" min="0" max="24" /></td>
        <td><input type="number" id="kept_monthsB_s" min="0" max="24"/></td>
      </tr>
      <tr>
        <td>기존요금제(월)</td>
        <td><input type="number" id="baseplanA" min="0" /></td>
        <td><input type="number" id="baseplanA_s" min="0" disabled /></td>
        <td><input type="number" id="baseplanB" min="0" /></td>
        <td><input type="number" id="baseplanB_s" min="0" disabled /></td>
      </tr>
      <tr>
        <td>부가서비스(월)</td>
        <td><input type="number" id="additionalA" min="0" /></td>
        <td><input type="number" id="additionalA_s" min="0" disabled /></td>
        <td><input type="number" id="additionalB" min="0" /></td>
        <td><input type="number" id="additionalB_s" min="0" disabled /></td>
      </tr>
      <tr>
        <td>서비스 유지기간(개월)</td>
        <td><input type="number" id="addi_monthsA" min="0" max="24" /></td>
        <td><input type="number" id="addi_monthsA_s" min="0" max="24" disabled /></td>
        <td><input type="number" id="addi_monthsB" min="0" max="24" /></td>
        <td><input type="number" id="addi_monthsB_s" min="0" max="24" disabled /></td>
      </tr>
    </table>
  </form>

  <div class="result" id="result_A"></div>
  <div class="result" id="result_B"></div>

  <script>
    function syncInputsPostfix(postfix) {
      document.getElementById('device' + postfix + '_s').value = document.getElementById('device' + postfix).value;
      document.getElementById('support' + postfix + '_s').value = document.getElementById('support' + postfix).value;
      document.getElementById('extra' + postfix + '_s').value = 0;
      document.getElementById('reqplan' + postfix + '_s').value =
        Math.round(document.getElementById('reqplan' + postfix).value * 0.75) || 0;
      document.getElementById('baseplan' + postfix + '_s').value =
        Math.round(document.getElementById('baseplan' + postfix).value * 0.75) || 0;
      document.getElementById('additional' + postfix + '_s').value = document.getElementById('additional' + postfix).value;
      document.getElementById('addi_months' + postfix + '_s').value = document.getElementById('addi_months' + postfix).value;
    }

    function highlight(val1, val2) {
      return val1 < val2
        ? ['background:#fff9c4;font-weight:bold;', '']
        : val2 < val1
        ? ['', 'background:#fff9c4;font-weight:bold;']
        : ['', ''];
    }

    function calculate() {
      syncInputsPostfix('A');
      syncInputsPostfix('B');

      function getVal(id, def=0) { return parseInt(document.getElementById(id).value) || def;}
      // A안 계산
      let deviceA = getVal('deviceA');
      let supportA = getVal('supportA');
      let extraA = getVal('extraA');
      let reqplanA = getVal('reqplanA');
      let kept_monthsA = getVal('kept_monthsA');
      let baseplanA = getVal('baseplanA');
      let additionalA = getVal('additionalA');
      let addi_monthsA = getVal('addi_monthsA');
      let reqplanA_s = getVal('reqplanA_s');
      let kept_monthsA_s = getVal('kept_monthsA_s');
      let baseplanA_s = getVal('baseplanA_s');
      let additionalA_s = getVal('additionalA_s');
      let addi_monthsA_s = getVal('addi_monthsA_s');

      let duty_commonA = reqplanA + additionalA;
      let duty_choiceA = reqplanA_s + additionalA_s;

      let halbuCommonA = deviceA - supportA - extraA;
      let pay2yCommonA = reqplanA * kept_monthsA + baseplanA * (24 - kept_monthsA) + additionalA * addi_monthsA;
      let total2yCommonA = halbuCommonA + pay2yCommonA;

      let halbuChoiceA = deviceA - supportA;
      let pay2yChoiceA = reqplanA_s * kept_monthsA_s + baseplanA_s * (24 - kept_monthsA_s) + additionalA_s * addi_monthsA_s;
      let total2yChoiceA = halbuChoiceA + pay2yChoiceA;

      var [styleA_c, styleA_s] = highlight(total2yCommonA, total2yChoiceA);

      // B안 계산
      let deviceB = getVal('deviceB');
      let supportB = getVal('supportB');
      let extraB = getVal('extraB');
      let reqplanB = getVal('reqplanB');
      let kept_monthsB = getVal('kept_monthsB');
      let baseplanB = getVal('baseplanB');
      let additionalB = getVal('additionalB');
      let addi_monthsB = getVal('addi_monthsB');
      let reqplanB_s = getVal('reqplanB_s');
      let kept_monthsB_s = getVal('kept_monthsB_s');
      let baseplanB_s = getVal('baseplanB_s');
      let additionalB_s = getVal('additionalB_s');
      let addi_monthsB_s = getVal('addi_monthsB_s');

      let duty_commonB = reqplanB + additionalB;
      let duty_choiceB = reqplanB_s + additionalB_s;

      let halbuCommonB = deviceB - supportB - extraB;
      let pay2yCommonB = reqplanB * kept_monthsB + baseplanB * (24 - kept_monthsB) + additionalB * addi_monthsB;
      let total2yCommonB = halbuCommonB + pay2yCommonB;

      let halbuChoiceB = deviceB - supportB;
      let pay2yChoiceB = reqplanB_s * kept_monthsB_s + baseplanB_s * (24 - kept_monthsB_s) + additionalB_s * addi_monthsB_s;
      let total2yChoiceB = halbuChoiceB + pay2yChoiceB;

      var [styleB_c, styleB_s] = highlight(total2yCommonB, total2yChoiceB);

      document.getElementById('result_A').innerHTML =
        '<b>[A안 계산 결과]</b><br>' +
        '공통지원금<br>' +
        '할부원금: ' + halbuCommonA.toLocaleString() + '<br>' +
        '의무요금: 월 ' + duty_commonA.toLocaleString() + '<br>' +
        '기존요금: 월 ' + baseplanA.toLocaleString() + '<br>' +
        '<span style="' + styleA_c + '">2년 총비용: ' + total2yCommonA.toLocaleString() + '</span><br>' +
        '선택약정<br>' +
        '할부원금: ' + halbuChoiceA.toLocaleString() + '<br>' +
        '의무요금: 월 ' + duty_choiceA.toLocaleString() + '<br>' +
        '기존요금: 월 ' + baseplanA_s.toLocaleString() + '<br>' +
        '<span style="' + styleA_s + '">2년 총비용: ' + total2yChoiceA.toLocaleString() + '</span><br>';

      document.getElementById('result_B').innerHTML =
        '<b>[B안 계산 결과]</b><br>' +
        '공통지원금<br>' +
        '할부원금: ' + halbuCommonB.toLocaleString() + '<br>' +
        '의무요금: 월 ' + duty_commonB.toLocaleString() + '<br>' +
        '기존요금: 월 ' + baseplanB.toLocaleString() + '<br>' +
        '<span style="' + styleB_c + '">2년 총비용: ' + total2yCommonB.toLocaleString() + '</span><br>' +
        '선택약정<br>' +
        '할부원금: ' + halbuChoiceB.toLocaleString() + '<br>' +
        '의무요금: 월 ' + duty_choiceB.toLocaleString() + '<br>' +
        '기존요금: 월 ' + baseplanB_s.toLocaleString() + '<br>' +
        '<span style="' + styleB_s + '">2년 총비용: ' + total2yChoiceB.toLocaleString() + '</span><br>';
    }

    [
      'deviceA','supportA','extraA','reqplanA','kept_monthsA','baseplanA','additionalA','addi_monthsA','kept_monthsA_s',
      'deviceB','supportB','extraB','reqplanB','kept_monthsB','baseplanB','additionalB','addi_monthsB','kept_monthsB_s'
    ].forEach(function(id){ document.getElementById(id).addEventListener('input', calculate); });
    calculate();
  </script>
</body>
</html>
